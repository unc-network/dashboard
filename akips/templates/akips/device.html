{% extends 'akips/base.html' %}

{% block title %}OCNES {{ device.name }}{% endblock %}
{% block page_name %}Device Focus | {{ name }}{% endblock %}


{% block content %}
<div class="card">
    <div class="card-body">
        <div class="row">
            <div class="col-8">
                <dl class="row">
                    <dt class="col-sm-2">Name</dt>
                    <dd class="col-sm-10">{{ device.sysName }}</dd>
                    <dt class="col-sm-2">Address</dt>
                    <dd class="col-sm-10">{{ device.ip4addr }}</dd>
                    <dt class="col-sm-2">sysName</dt>
                    <dd class="col-sm-10">{{ device.sysName }}</dd>
                    <dt class="col-sm-2">sysLocation</dt>
                    <dd class="col-sm-10">{{ device.sysLocation }}</dd>
                    <dt class="col-sm-2">sysDescr</dt>
                    <dd class="col-sm-10">{{ device.sysDescr }}</dd>
                    <dt class="col-sm-2">Tier</dt>
                    <dd class="col-sm-10">{{ device.tier }}</dd>
                    <dt class="col-sm-2">Building</dt>
                    <dd class="col-sm-10">{{ device.building_name }}</dd>
                    <dt class="col-sm-2">Type</dt>
                    <dd class="col-sm-10">{{ device.type }}</dd>
                    <dt class="col-sm-2">Last Refresh</dt>
                    <dd class="col-sm-10">{{ device.last_refresh }}</dd>
                </dl>
            </div>
            <div class="col-4">
                <a href="https://akips.net.unc.edu/dashboard?mode=device;device_list={{ device.name }};time=last1h" class="btn btn-primary">View in AKiPS</a></p>
                {% if device.maintenance %}
                <div class="callout callout-danger">
                    <h5>Maintenance Mode is ON</h5>
                </div>
                {% endif %}
                <button type="button" class="btn btn-primary" onclick='toggle_maintenance_mode()'>Toggle Maintenance Mode</button></p>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-body table-responsive p-0">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Ack</th>
                    <th>Name</th>
                    <th>IP Address</th>
                    <th>Description</th>
                    <th>Last Event</th>
                    <th>Incident Request</th>
                </tr>
            </thead>
            <tbody>
                {% for device in devices %}
                <tr>
                    <td></td>
                    <td><a href="{% url 'device' device.device.name %}">{{ device.device.name }}</a></td>
                    <td>{{ device.device.ip4addr }}</td>
                    <td>{{ device.device.sysDescr }}</td>
                    <td>{{ device.last_refresh }}</td>
                    <td></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}

{% block js %}
<script type="text/javascript">
	function toggle_maintenance_mode() {
        console.log("NYI")
	}
</script>
{% endblock %}