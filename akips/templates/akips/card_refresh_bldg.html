{% load static %}

{% block content %}
<table class="table table-hover table-sm">
    <thead>
        <tr>
            <th>Ack</th>
            <th>Tier1 / Building</th>
            <th class="d-none d-md-table-cell">Switch</th>
            <th class="d-none d-md-table-cell">AP</th>
            <th class="d-none d-md-table-cell">UPS</th>
            <th>All</th>
            <th class="d-none d-md-table-cell">% Affected</th>
            <th>First Event</th>
            <th class="d-none d-md-table-cell">Trend</th>
            <th class="d-none d-md-table-cell">Incident Request</th>
        </tr>
    </thead>
    <tbody>
        {% for summary in summaries %}
        {% if summary.type == 'Distribution' %}
        <tr class="bg-light">
            <td></td>
            {% else %}
        <tr>
            <td>
                <div class="custom-control custom-switch">
                    {% if summary.ack %}
                    <input type="checkbox" class="custom-control-input ack-switch" id="ack-switch-{{ summary.id}}"
                        data-url="{% url 'ack' summary.id %}" checked>
                    {% else %}
                    <input type="checkbox" class="custom-control-input ack-switch" id="ack-switch-{{ summary.id}}"
                        data-url="{% url 'ack' summary.id %}">
                    {% endif %}
                    <label class="custom-control-label" for="ack-switch-{{ summary.id }}"></label>
                </div>
            </td>
            {% endif %}
            {% if summary.type == 'Distribution' %}
            <!-- <td class="font-weight-bold text-center"> -->
            <td class="font-weight-bold">
                <!-- <a href="{% url 'summary' summary.id %}">{{ summary.name }} <i class="fas fa-caret-down"></i></a> -->
                <a href="{% url 'summary' summary.id %}"><i class="fas fa-caret-down"></i> {{ summary.name }}</a>
            </td>
            {% else %}
            <td>
                <a href="{% url 'summary' summary.id %}"><i class="fas fa-building"></i> {{ summary.name }}</a> 
                <!-- <a href="{% url 'summary' summary.id %}">{{ summary.name }}</a>  -->
            </td>
            {% endif %}
            <td class="d-none d-md-table-cell">{{ summary.switch_count }}</td>
            <td class="d-none d-md-table-cell">{{ summary.ap_count }}</td>
            <td class="d-none d-md-table-cell">{{ summary.ups_count }}{% if summary.ups_battery > 0 %} <i class="fas fa-battery-three-quarters text-danger"></i>{% endif %}</td>
            <td>{{ summary.total_count }}</td>
            <td class="d-none d-md-table-cell">
                {% if summary.percent_down >= .10 %}
                <span class="text-danger">{% widthratio summary.percent_down 1 100 %}%</span>
                {% else %}
                {% widthratio summary.percent_down 1 100 %}%
                {% endif %}
            </td>
            <td>{{ summary.first_event|date:'m/d h:i:s a' }}</td>
            {% if summary.trend == 'New' %}
                <td class="text-center bg-danger akips_trend d-none d-md-table-cell"><i class="fas fa-plus"></i></td>
            {% elif summary.trend == 'Increasing' %}
                <td class="text-center bg-warning akips_trend d-none d-md-table-cell"><i class="fas fa-level-up-alt"></i></td>
            {% elif summary.trend == 'Decreasing' %}
                <td class="text-center bg-success akips_trend d-none d-md-table-cell"><i class="fas fa-level-down-alt"></i></td>
            {% else %}
                <td class="text-center akips_trend d-none d-md-table-cell"><i class="fas fa-long-arrow-alt-right"></i></td>
            {% endif %}
            <td class="text-center d-none d-md-table-cell">
                {% if summary.incident %}
                {{ summary.incident }}
                {% else %}
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" name="event" value="summary_{{ summary.id }}">
                </div>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}